function plot_results(fig_index, t, xr, mu, map, y, meas_ind, newfeature, X, M, D)
    % figure details
    figure(fig_index);
    clf;
    hold on;
    
    % plot robot state
    plot(xr(1, 1:t), xr(2, 1:t), 'ro--')
    plot( ... 
        [xr(1, t), xr(1, t) + 1 * cos(xr(3, t))], ...
        [xr(2, t), xr(2, t) + 1 * sin(xr(3, t))], ...
        'r-' ...
    );
    
    % plot particles
    cmap = colormap('jet');
    cmap = cmap(1:3:end, :);
    cn = length(cmap(:, 1));
    
    for j = 1:length(meas_ind)
        plot( ...
            [xr(1, t), xr(1, t) + y(1, j) * cos(y(2, j) + xr(3, t))], ...
            [xr(2, t), xr(2, t) + y(1, j) * sin(y(2, j) + xr(3, t))], ...
            'Color', cmap(mod(meas_ind(j), cn) + 1, :) ...
        );
    end
    
    % plot features
    for j = 1:M
        plot( ...
            map(1, j), ...
            map(2, j), ...
            'o', 'Color', cmap(mod(j, cn) + 1, :), ...
            'MarkerSize', 10, ...
            'LineWidth', 2 ...
        );
    end
    
    % plot particles
    for d = 1:D
        plot(X(1, d), X(2, d), 'b.');
%         for j = 1:M
%             if (~newfeature(j))
%                 plot( ...
%                     mu(1, j, d), ...
%                     mu(2, j, d), ...
%                     '.', 'Color', cmap(mod(j, cn) + 1, :) ...
%                 );
%             end
%         end
    end
    
    % plot parameters
    axis equal
    axis([-8 8 -2 10])
    title('FastSLAM with Range & Bearing Measurements')
end